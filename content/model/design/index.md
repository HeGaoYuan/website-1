---
title: "Design"
description: "Design"
lead: ""
date: 2020-11-12T15:22:20+01:00
lastmod: 2020-11-12T15:22:20+01:00
draft: false
images: []
menu:
  model:
    parent: "intro"
weight: 200
toc: true
---
This diagram illustrates the workflow from model generation to model deployment.

{{< img src="design.png" alt="design" caption="Workflow" >}}


- A ModelVersion CRD can be generated by a user manually or programmatically by a training job CRD. KubeDL training CRDs (Tensorflow and Pytorch)
already integrates this. Check the CRD spec for [Tensorflow Job](https://github.com/alibaba/kubedl/blob/master/apis/training/v1alpha1/tfjob_types.go#L53) and [Pytorch Job.](https://github.com/alibaba/kubedl/blob/master/apis/training/v1alpha1/pytorchjob_types.go#L46)

- The ModelVersion Controller watches the ModelVersion CRD and does the following steps.
- Create a Model CRD, if not exists, and associate it with the corresponding ModelVersion CRDs.
- Create the PV and PVC for the backend model storage.
- Create a Kaniko pod mounted with the model storage PV. The Kaniko pod generates a docker image that incorporates the model artifacts and push to the dockerhub.
